"0","packages_list <- c('data.table', 'tidyverse', 'kableExtra', 'PSW', 'MASS', 'sandwich', 'mice') # 'MatchIt', "
"0","new_packages <- packages_list[!(packages_list %in% installed.packages()[, 'Package'])]"
"0","if(length(new_packages)) install.packages(new_packages)"
"0","suppressMessages(lapply(packages_list, library, character.only=TRUE))"
"1","[[1]]
"
"1"," [1]"
"1"," ""MASS""      "
"1"," ""PSW""       "
"1"," ""kableExtra"""
"1"," ""forcats""   "
"1"," ""stringr""   "
"1"," ""dplyr""     "
"1"," ""purrr""     "
"1"," ""readr""     "
"1"," ""tidyr""     "
"1"," ""tibble""    "
"1"," ""tidyverse"" "
"1"," ""stats""     "
"1"," ""graphics""  "
"1"," ""grDevices"" "
"1"," ""utils""     "
"1","
"
"1","[19]"
"1"," ""datasets""  "
"1"," ""methods""   "
"1"," ""base""      "
"1","
"
"1","
"
"1","[[2]]
"
"1"," [1]"
"1"," ""sandwich""  "
"1"," ""MASS""      "
"1"," ""PSW""       "
"1"," ""kableExtra"""
"1"," ""forcats""   "
"1"," ""stringr""   "
"1"," ""dplyr""     "
"1"," ""purrr""     "
"1"," ""readr""     "
"1","
"
"1","[10]"
"1"," ""tidyr""     "
"1"," ""tibble""    "
"1"," ""ggplot2""   "
"1"," ""tidyverse"" "
"1"," ""data.table"""
"1"," ""stats""     "
"1"," ""utils""     "
"1","[19]"
"1"," ""methods""   "
"1"," ""base""      "
"1","
"
"1","
"
"1","[[3]]
"
"1"," [1]"
"1"," ""sandwich""  "
"1"," ""forcats""   "
"1"," ""stringr""   "
"1"," ""dplyr""     "
"1"," ""purrr""     "
"1"," ""readr""     "
"1","
"
"1","[10]"
"1"," ""tidyr""     "
"1"," ""tibble""    "
"1"," ""ggplot2""   "
"1"," ""tidyverse"" "
"1"," ""data.table"""
"1"," ""stats""     "
"1"," ""graphics""  "
"1"," ""utils""     "
"1","
"
"1"," ""datasets""  "
"1"," ""methods""   "
"1"," ""base""      "
"1","
"
"1","
"
"1","[[4]]
"
"1"," [1]"
"1"," ""sandwich""  "
"1"," ""tibble""    "
"1"," ""ggplot2""   "
"1"," ""tidyverse"" "
"1"," ""data.table"""
"1"," ""stats""     "
"1","
"
"1","[19]"
"1"," ""datasets""  "
"1"," ""methods""   "
"1"," ""base""      "
"1","
"
"1","
"
"1","[[5]]
"
"1"," [1]"
"1"," ""sandwich""  "
"1"," ""MASS""      "
"1"," ""PSW""       "
"1"," ""stringr""   "
"1"," ""dplyr""     "
"1"," ""purrr""     "
"1"," ""readr""     "
"1","
"
"1"," ""stats""     "
"1"," ""graphics""  "
"1"," ""grDevices"" "
"1"," ""utils""     "
"1","
"
"1","[19]"
"1"," ""datasets""  "
"1"," ""methods""   "
"1"," ""base""      "
"1","
"
"1","
"
"1","[[6]]
"
"1"," [1]"
"1"," ""sandwich""  "
"1"," ""MASS""      "
"1"," ""PSW""       "
"1"," ""kableExtra"""
"1"," ""forcats""   "
"1"," ""stringr""   "
"1"," ""dplyr""     "
"1"," ""purrr""     "
"1"," ""readr""     "
"1"," ""ggplot2""   "
"1"," ""tidyverse"" "
"1"," ""data.table"""
"1"," ""grDevices"" "
"1"," ""utils""     "
"1","
"
"1","[19]"
"1"," ""datasets""  "
"1"," ""methods""   "
"1"," ""base""      "
"1","
"
"1"," [1]"
"1"," ""mice""      "
"1"," ""sandwich""  "
"1"," ""MASS""      "
"1"," ""PSW""       "
"1"," ""kableExtra"""
"1"," ""forcats""   "
"1"," ""stringr""   "
"1"," ""dplyr""     "
"1"," ""purrr""     "
"1","
"
"1"," ""tibble""    "
"1"," ""data.table"""
"1"," ""stats""     "
"1"," ""graphics""  "
"1"," ""grDevices"" "
"1","
"
"1","[19]"
"1"," ""utils""     "
"1"," ""datasets""  "
"1","
"
"1","
"
"0","source(""functions.R"")"
"0",""
"0","select <- dplyr::select"
"0","rbind <- base::rbind"
"0","kable <- knitr::kable"
"0",""
"0","extractATE <- function(.psw) {"
"0","  .wt_estimator <- .psw[c(""est.risk.wt"", ""std.risk.wt"", ""est.rr.wt"", ""std.rr.wt"", ""est.or.wt"", ""std.or.wt"")] # list"
"0","  colnames(.wt_estimator) <- c(""est.risk.wt"", ""std.risk.wt"", ""est.rr.wt"", ""std.rr.wt"", ""est.or.wt"", ""std.or.wt"")"
"0","  .wt_estimator"
"0","}"
"0",""
"0","options(radian.escape_key_map = list("
"0","    list(key = ""m"", value = "" %>% "")"
"0","))"
"0",""
"0",""
"0","extractStdDiff <- function(.psw) {"
"0","    Vars = row.names(.psw$std.diff.before),"
"0","    Before = unname(.psw$std.diff.before[, 5]),"
"0","    After = unname(.psw$std.diff.after[, 5])"
"0","  )"
"0","  .df"
"0","}"
"0",""
"0",""
"0","# pool MI results"
"0","# https://stats.idre.ucla.edu/wp-content/uploads/2016/02/multipleimputation.pdf"
"0","PoolEstimates <- function(Q, U) {"
"0","  # Q is point estimate"
"0","  # U is variance estimate"
"0","  if (length(Q) != length(U)) {"
"0","    stop(""Q and U are of different length"")"
"0","  }"
"0",""
"0","  m <- length(Q)"
"0","  Q_bar <- mean(Q)"
"0","  U_bar <- mean(U) # within-imputation variance"
"0","  B <- var(Q) # between-imputation variance"
"0","  tt <- U_bar + (1 + 1 / m) * B # total variance"
"0","  # vm <- (m - 1) * (1 + U_bar / ((1 + 1 / m) * B)) ^ 2 # degree of freedom"
"0","  .tmp <- c(Q_bar, tt)"
"0","  names(.tmp) <- c(""Q_bar"", ""total_variance"")"
"0","}"
"0",""
"0","# list.files(file.path(""RData""))"
"0",""
"0","# load data"
"0","load(file.path(""RData"", ""ps_data.RData""))"
"2","strings not representable in native encoding will be translated to UTF-8"
"0","best_formula_taxol <- ""taxolpreg ~ I_HER2 + gadx_norm + I_TNBC + I_stage_34 +"
"0","I_surgery + I_neoadjuvant + neo_stage + gadx_surg + gadx_stage"""
"0",""
"0","best_formula_gcsf <- ""gfpreg ~ I_HER2 + gadx_norm + I_TNBC + I_stage_34 +"
"0","tnbc_stage + tnbc_neo"""
"0",""
"0","tbl1_vars <- c(""age_norm"", ""gadx_norm"", ""I_stage_34"","
"0","""I_TNBC"", ""I_HER2"", ""I_neoadjuvant"", ""I_surgery"")"
